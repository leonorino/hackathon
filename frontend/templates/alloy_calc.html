{% extends "base.html" %} {% block title %}Калькулятор сплавов{% endblock %} {%
    block body %}
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6 text-center">Калькулятор сплавов</h1>
        <div id="alloyCalculator">
            <div
            class="bg-white rounded-2xl shadow-lg p-5 max-w-md mx-auto border border-gray-200"
            >
            <div class="mb-4">
                <input
                type="text"
                id="formulaInput"
                readonly
                class="w-full p-2 border border-gray-300 rounded-lg text-xl font-mono text-center bg-gray-50"
                placeholder="Al +"
                value="Al"
                />
            </div>
            
            <div class="flex gap-4">
                <div class="grid grid-cols-3 gap-2 flex-1" id="elementButtons">
                    {% for element in ['Mg', 'Mn', 'Cu', 'Si', 'Fe', 'Zn'] %}
                    <button
                    class="element-btn p-2 border border-gray-300 rounded text-lg font-medium transition-colors cursor-pointer hover:bg-indigo-100"
                    data-element="{{ element }}"
                    >
                    {{ element }}
                </button>
                {% endfor %}
                <button
                    class="element-btn col-start-2 p-2 border border-gray-300 rounded text-lg font-medium transition-colors cursor-pointer hover:bg-indigo-100"
                    >
                    Li
                </button>
            </div>
            
            <div class="flex flex-col gap-2">
                <button
                id="clearBtn"
                class="p-2 border border-gray-300 rounded text-lg font-medium bg-indigo-600 text-white hover:bg-indigo-700 transition-colors cursor-pointer"
                >
                ⌫
            </button>
</div>
</div>

<div class="mt-6">
    <h2 class="text-xl font-bold mb-3">ИТОГ</h2>
    
    <div id="loadingState" class="text-center py-4" style="display: block">
        <div
        class="inline-block w-6 h-6 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"
        ></div>
        <p class="text-gray-500 mt-2">Загрузка данных...</p>
    </div>
    
    <div
    id="resultState"
    class="p-4 border border-gray-200 rounded-lg bg-gray-50 space-y-3"
    style="display: none"
    >
    <div class="font-semibold text-indigo-700" id="alloyName"></div>
    <div class="text-sm text-gray-600" id="alloyId"></div>
    <div class="text-xs text-gray-500" id="alloyNotes"></div>
    <div class="mt-3 pt-2 border-t">
        <div class="text-xs text-gray-600 mb-1">Состав:</div>
        <div class="flex flex-wrap gap-1" id="alloyComposition"></div>
    </div>
    <div class="mt-3 grid grid-cols-2 gap-2 text-xs" id="alloyProperties">
        <div>
            <span class="text-gray-500">Плотность:</span>
            <span id="density"></span>
        </div>
        <div>
            <span class="text-gray-500">Прочность:</span>
            <span id="strength"></span>
        </div>
        <div>
            <span class="text-gray-500">Проводимость:</span>
            <span id="conductivity"></span>
        </div>
        <div>
            <span class="text-gray-500">Удлинение:</span>
            <span id="elongation"></span>
        </div>
    </div>
</div>

<div
id="notFoundState"
class="p-4 border-l-4 border-red-500 bg-red-50 rounded"
style="display: none"
>
<div class="flex">
    <svg
    class="w-5 h-5 text-red-400 mr-2 flex-shrink-0"
    fill="currentColor"
    viewBox="0 0 20 20"
    >
    <path
    fill-rule="evenodd"
    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
    clip-rule="evenodd"
    />
</svg>
<span class="text-red-700">
    Сплав <span class="font-mono" id="searchQuery"></span> не найден.
</span>
</div>
</div>

<div
id="defaultState"
class="p-4 border border-gray-200 rounded-lg bg-gray-50 space-y-3"
style="display: none"
>
<div class="font-semibold text-indigo-700">Технический алюминий</div>
<div class="text-sm text-gray-600">Al</div>
<div class="text-xs text-gray-500">
    Стандартный технический алюминий (марка АД0). Высокая коррозионная
    стойкость, хорошая свариваемость.
</div>
<div class="mt-3 pt-2 border-t">
    <div class="text-xs text-gray-600 mb-1">Состав:</div>
    <span class="px-1.5 py-0.5 bg-white text-xs border rounded"
    >Al: 99.0%</span
    >
    <span
    class="px-1.5 py-0.5 bg-white text-xs border rounded text-gray-400"
    >остальные: ≤1.0%</span
    >
</div>
<div class="mt-3 grid grid-cols-2 gap-2 text-xs">
    <div><span class="text-gray-500">Плотность:</span> 2.70 г/см³</div>
    <div><span class="text-gray-500">Прочность:</span> 90 МПа</div>
    <div>
        <span class="text-gray-500">Проводимость:</span> 58 % IACS
    </div>
    <div><span class="text-gray-500">Удлинение:</span> 35 %</div>
</div>
</div>
</div>
</div>
</div>
</div>

<script src="/static/js/calc.js"></script>
{% endblock %}
